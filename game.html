<!DOCTYPE html>
<html lang="zh-cmn">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="Baozier">
		<title>战国</title>
		<link rel="stylesheet" type="text/css" href="public/general.css" >
		<link rel="stylesheet" type="text/css" href="vendor/font-awesome/css/font-awesome.min.css" >
    </head>
	<body>
		<script>
			var data = {
				settings: {
					delay: 100
				},
				round: 0,
				stage: 4,
				history: [],
				player: [0, 2, 1, 1, 1, 1, 1, 1, 0],
				//player: [0, 2, 1, 1, 1, 1, 1, 1, 0],
				allies: [
					//[1, 3], [2, 3], [6, 4], [1, 5], [3, 6], [2, 7]
				],
				relations: [
					[],
					[7, 5, 2, 4, 6, 3],
					[3, 5, 4, 6, 1, 7],
					[2, 5, 6, 4, 1, 7],
					[5, 6, 2, 1, 3, 7],
					[6, 4, 3, 2, 1, 7],
					[5, 4, 3, 2, 7, 1],
					[1, 5, 3, 6, 4, 2],
					[]
				],
				power: [0, 5, 5, 5, 5, 5, 5, 5, 0],
				hero: [
					[],
					[1, 1, 1, 1, 1, 1], 
					[1, 1, 1, 1, 1, 1], 
					[1, 1, 1, 1, 1, 1],
					[1, 1, 1, 1, 1, 1], 
					[1, 1, 1, 1, 1, 1],
					[1, 0, 0, 0, 0, 0],
					//[1, 1, 1, 1, 1, 1],
					[1, 1, 1, 1, 1, 1],
					[]
				],
				fame: [6, 3, 2, 1, 5, 7, 4],
				//fame: [1, 2, 6, 7, 4, 3, 5],
				force: [2, 7, 6, 4, 5, 1, 3],
				cities: [
					{code: 0, occupy: 0, army: [], status: [], order: null},
					{code: 1, occupy: 0, army: [], status: [], order: null},
					{code: 2, occupy: 4, army: [0], status: [1], order: 6},
					//{code: 2, occupy: 4, army: [0], status: [1], order: null},
					{code: 3, occupy: 0, army: [], status: [], order: null},
					{code: 4, occupy: 4, army: [4, 8], status: [1, 1], order: null},
					{code: 5, occupy: 0, army: [], status: [], order: null},
					//{code: 6, occupy: 4, army: [4], status: [1], order: 1},
					{code: 6, occupy: 0, army: [], status: [], order: null},
					//{code: 7, occupy: 3, army: [3, 8], status: [1, 1], order: 0},
					{code: 7, occupy: 3, army: [3, 8], status: [1, 1], order: null},
					//{code: 8, occupy: 3, army: [0], status: [1], order: 6},
					{code: 8, occupy: 3, army: [0], status: [1], order: null},
					{code: 9, occupy: 0, army: [], status: [], order: null},
					{code: 10, occupy: 0, army: [], status: [], order: null},
					{code: 11, occupy: 7, army: [0], status: [1], order: null},
					{code: 12, occupy: 0, army: [], status: [], order: null},
					{code: 13, occupy: 0, army: [], status: [], order: null},
					{code: 14, occupy: 7, army: [7, 8], status: [1, 1], order: null},
					{code: 15, occupy: 0, army: [], status: [], order: null},
					{code: 16, occupy: 0, army: [], status: [], order: null},
					{code: 17, occupy: 0, army: [], status: [], order: null},
					{code: 18, occupy: 5, army: [0], status: [0], order: 6},
					//{code: 18, occupy: 5, army: [0], status: [1], order: null},
					{code: 19, occupy: 6, army: [6, 8, 0], status: [1, 1, 0], order: 6},
					//{code: 19, occupy: 6, army: [6, 8], status: [1, 1], order: null},
					{code: 20, occupy: 0, army: [], status: [], order: null},
					{code: 21, occupy: 1, army: [1, 8], status: [1, 1], order: null},
					{code: 22, occupy: 0, army: [], status: [], order: null},
					{code: 23, occupy: 1, army: [0], status: [1], order: null},
					{code: 24, occupy: 0, army: [], status: [], order: null},
					{code: 25, occupy: 0, army: [], status: [], order: null},
					{code: 26, occupy: 0, army: [], status: [], order: null},
					{code: 27, occupy: 6, army: [0], status: [0], order: 1},
					//{code: 27, occupy: 6, army: [0], status: [1], order: null},
					{code: 28, occupy: 5, army: [5, 8], status: [0, 1], order: 1},
					//{code: 28, occupy: 5, army: [5, 8], status: [1, 1], order: null},
					{code: 29, occupy: 6, army: [6, 0], status: [0, 1], order: 0},
					//{code: 29, occupy: 0, army: [], status: [], order: null},
					{code: 30, occupy: 8, army: [0], status: [1], order: null},
					{code: 31, occupy: 0, army: [], status: [], order: null},
					{code: 32, occupy: 0, army: [], status: [], order: null},
					//{code: 33, occupy: 2, army: [2, 8], status: [1, 1], order: 0},
					{code: 33, occupy: 2, army: [2, 8], status: [1, 1], order: null},
					//{code: 34, occupy: 6, army: [6], status: [1], order: 0},
					{code: 34, occupy: 0, army: [], status: [], order: null},
					//{code: 35, occupy: 2, army: [0], status: [1], order: 6}
					{code: 35, occupy: 2, army: [0], status: [1], order: null}
				],
			};
		</script>
		<div v-cloak id="app">
			<decision-board
				v-bind:key="round"
				v-bind:stage="stage" 
				v-bind:player="player"
				v-bind:state="statesInfo"
				v-bind:cities="cities"
				v-bind:relations="relations"
				v-bind:rank="rank"
				v-bind:orders="fame"
				v-bind:settings="settings"
				v-bind:focus="focus"
				v-bind:hero="hero"
				v-bind:force="force"
				@addNewAlly="addNewAlly"
				@removeAlly="removeAlly"
				@addNewHistory="addNewHistory"
				@toNextStage="toNextStage"
				@increaseRelation="increaseRelation"
				@decreaseRelation="decreaseRelation"
				@saveItemOrder="saveItemOrder"
				@updateOrderOfCities="updateOrderOfCities"
				@disturbPowerPoint="disturbPowerPoint"
				@replaceCitisOccupy="replaceCitisOccupy"
			></decision-board>
		    <main id="main">
		    	<template v-for="(c, index) in getCitiesInfo()">
		    		<city-info 
		    			v-bind:definition="c" 
		    		></city-info>
		    		<occupy-info 
		    			v-bind:player="player.indexOf(2)"
		    			v-bind:definition="c" 
		    			v-bind:data="cities[index]"
		    			v-bind:stage="stage"
		    			v-bind:states="statesInfo"
		    			v-bind:state="getStatesInfo()[cities[index].occupy]"
		    			@saveItemOrder="saveItemOrder"
		    			@updateFocusVariable="updateFocusVariable"
		    		></occupy-info>
		    	</template>
		    </main>
		    <div id="map"></div>
		    <section id="rank">
		    	<div id="rank-fame">
					<fame-info
						v-bind:data="fame"
						v-bind:player="player.indexOf(2)"
						v-bind:type="0"
					></fame-info>
					<fame-info
						v-bind:data="force"
						v-bind:player="player.indexOf(2)"
						v-bind:type="1"
					></fame-info>
					<div id="rank-treasure">
						<treasure-info 
							v-bind:occupy="getStatesInfo()[fame[0]].name" v-bind:type="0">
						</treasure-info>
						<treasure-info 
							v-bind:occupy="getStatesInfo()[force[0]].name" v-bind:type="1">
						</treasure-info>
					</div>
		    	</div>
		    	<supply-info 
		    		v-bind:data="statesInfo"
		    		v-bind:player="player"
		    	></supply-info>
		    </section>
		    <aside id="aside">
		    	<h4>回合: {{round + 1}}</h4>
		    	<h5>战国七雄</h5>
		    	<template v-for="(s, index) in getStatesInfo()" v-if="player[index]!==0">
			    	<state-info
			    		v-bind:definition="s"
			    		v-bind:player="player[index]===2"
			    		v-bind:data="statesInfo[index]"
			    		v-bind:power="power"
			    		v-bind:hero="hero[index]"
			    		v-bind:rank="rank"
			    	>
			    	</state-info>
		    	</template>
		    	<h5>战国策</h5>
		    	<div id="aside-history">
		    		<section class="history-round" v-for="(h, i) in history">
		    			<header>回合: {{i + 1}}</header>
		    			<div v-for="r in h">{{r}}</div>
		    		</section>
		    	</div>
		    </aside>
		</div>
		<script type="text/javascript" src="vendor/vue.js"></script>
		<script type="text/javascript" src="source/definition/state.js"></script>
		<script type="text/javascript" src="source/definition/city.js"></script>
		<script type="text/javascript" src="source/definition/army.js"></script>
		<script type="text/javascript" src="source/definition/stage.js"></script>
		<script type="text/javascript" src="source/definition/hero.js"></script>
		<script type="text/javascript" src="source/definition/order.js"></script>
		<script type="text/javascript" src="source/component/city-info.js"></script>
		<script type="text/javascript" src="source/component/occupy-info.js"></script>
		<script type="text/javascript" src="source/component/state-info.js"></script>
		<script type="text/javascript" src="source/component/fame-info.js"></script>
		<script type="text/javascript" src="source/component/supply-info.js"></script>
		<script type="text/javascript" src="source/component/treasure-info.js"></script>
		<script type="text/javascript" src="source/ai/ally.js"></script>
		<script type="text/javascript" src="source/ai/breach.js"></script>
		<script type="text/javascript" src="source/ai/plan.js"></script>
		<script type="text/javascript" src="source/ai/disturb.js"></script>
		<script type="text/javascript" src="source/ai/hero.js"></script>
		<script type="text/javascript" src="source/ai/retreat.js"></script>
		<script type="text/javascript" src="source/processor/before-battle.js"></script>
		<script type="text/javascript" src="source/processor/after-battle.js"></script>
		<script type="text/javascript" src="source/component/decision-board.js"></script>
		<script type="text/javascript" src="source/epic.js"></script>
	</body>
</html>